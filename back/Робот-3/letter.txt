Глеб Викторович, добрый вечер! В приложении наша обновленная программа. Ниже руководство пользователя.

Ячейка 1: Установка пакета "yfinance", с помощью которого программа получает данные по акциям с сайта Yahoo.Finance. Запускается только один раз, чтобы установить пакет. Установка занимает некоторое время. Для корректной работы нужно не запускать ячейку 1 (выдаст ошибку), а скопировать код в новую ячейку и запустить в ней.

Ячейка 2: Загрузка всех необходимых библиотек и пакетов. Запускается один раз при открытии программы.

Ячейка 3: Выбор тикера акций (в формате Yahoo.Finance) и временного периода для загрузки данных.

Ячейка 4: Разбиение данных на тестовый и торговый период путем ввода даты начала торгового периода.

Ячейка 5: Указание комиссии за совершение сделок в процентах от оборота. Комиссия берется каждый раз, когда мы меняем позицию с long на short и наоборот.

Ячейка 6: На тестовом периоде идет перебор сочетаний скользящих средних. Обработка занимает несколько минут. В процессе выполнения указывается выполненная доля в процентах. Мы искусственно ограничили возможные значения длин 50 и 25 днями, чтобы это не было слишком долго. Изначально имеется капитал в размере 100. Для каждого сочетания скользящих средних программа проходит по каждому дню тестового периода. Если в конкретный день значение короткой скользящей средней больше значения длинной, значит акция "перекуплена", и мы сидим в позиции short. Следовательно, на следующий день мы изменяем размер капитала на отношение разницы между предыдущей ценой и текущей ценой к предыдущей цене. И наоборот, если короткая скользящая средняя меньше длинной. Таким образом, для каждого сочетания скользящих получаем итоговый размер капитала после торгов. Также, для каждого сочетания скользящих подсчитывается доля правильно угаданных направлений движения цены акций.

Ячейка 7: Вывод результатов анализа из ячейки 6 на основе двух подходов: лучший прирост капитала за период и наибольшая доля угаданных направлений движения. Рисует распределение всех сочетаний скользящих средних и выделяет лучшие результаты по двум подходам.

Ячейка 8: "Реальная" торговля на торговом периоде. Программа просит ввести параметры скользящих средних (например, рекомендуемые в предыдущей ячейке) и выводит для этих параметров результаты. Для опробования разных значений скользящих можно перезапускать только эту ячейку.


С уважением,
Константин